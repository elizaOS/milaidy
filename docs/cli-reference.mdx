---
title: "CLI Reference"
sidebarTitle: "CLI Reference"
description: "All Milaidy terminal commands, TUI hotkeys, and headless mode."
---

The `milaidy` CLI is the primary interface for managing the Milaidy AI agent. Every command is registered through the Commander.js framework and supports `--help` for inline documentation.

## Global Flags

These flags are available on every command:

| Flag | Description |
|------|-------------|
| `--version`, `-v`, `-V` | Print the current Milaidy version and exit |
| `--help`, `-h` | Show help for any command or subcommand |
| `--profile <name>` | Use a named configuration profile (state dir becomes `~/.milady-<name>/`) |
| `--dev` | Shorthand for `--profile dev` (also sets gateway port to `19001`) |

<Info>
Profiles allow running multiple independent Milaidy instances. Each profile gets its own state directory, config file, and workspace. The `--dev` flag is a convenience alias that sets the profile to `dev` and adjusts the gateway port for local development.
</Info>

---

## `milaidy` / `milaidy tui`

Start Milaidy with the interactive terminal UI. This is the **default command** -- running `milaidy` with no arguments is equivalent to `milaidy tui`.

```bash
milaidy tui [options]
```

**Options:**

| Flag | Description |
|------|-------------|
| `-m, --model <model>` | Override the default model (e.g. `anthropic/claude-sonnet-4-20250514`) |

The TUI boots the full ElizaOS agent runtime (with `requireConfig: true`) and launches an interactive terminal chat interface with a status bar, message area, and input editor.

<CodeGroup>
```bash Default
milaidy
```

```bash With model override
milaidy tui -m anthropic/claude-sonnet-4-20250514
```

```bash With profile
milaidy --profile work tui
```
</CodeGroup>

---

## `milaidy start` / `milaidy run`

Start the ElizaOS agent runtime in **server-only mode** (no interactive TUI). The runtime starts with `serverOnly: true`, which means it boots the API server and agent loop without the terminal chat interface.

```bash
milaidy start
milaidy run          # alias for start
```

The `run` command is a direct alias -- both call the same `startEliza({ serverOnly: true })` function.

<Info>
This is the recommended mode for production deployments, Docker containers, and CI/CD environments. The API server listens on port `2138` by default (override with `MILADY_PORT`).
</Info>

---

## `milaidy setup`

Initialize the Milaidy configuration file and agent workspace. Creates `~/.milady/milady.json` if it does not exist and bootstraps the agent workspace directory with required scaffold files.

```bash
milaidy setup [options]
```

**Options:**

| Flag | Description |
|------|-------------|
| `--workspace <dir>` | Custom agent workspace directory (defaults to value in config or `~/.milady/workspace/`) |

The setup process:
1. Attempts to load the existing config from `~/.milady/milady.json`
2. Resolves the workspace directory from `--workspace` flag, `agents.defaults.workspace` config value, or the built-in default
3. Ensures the workspace directory exists with all bootstrap files

<CodeGroup>
```bash Default setup
milaidy setup
```

```bash Custom workspace
milaidy setup --workspace ~/my-agent-workspace
```
</CodeGroup>

---

## `milaidy configure`

Display configuration guidance -- a quick-reference for how to read config values, which environment variables to set, and where to edit the config file.

```bash
milaidy configure
```

This prints:
- How to use `milaidy config get <key>` to read values
- A reminder to edit `~/.milady/milady.json` directly for full control
- A list of common environment variables for model providers

The output includes these provider env vars:

| Environment Variable | Provider |
|---------------------|----------|
| `ANTHROPIC_API_KEY` | Anthropic (Claude) |
| `OPENAI_API_KEY` | OpenAI (GPT) |
| `AI_GATEWAY_API_KEY` | Vercel AI Gateway |
| `GOOGLE_API_KEY` | Google (Gemini) |

---

## `milaidy config`

A group of subcommands for inspecting the Milaidy configuration.

### `milaidy config get <key>`

Read a single configuration value. Supports **dot-notation** to traverse nested objects.

```bash
milaidy config get <key>
```

Prints the value as a string, or `(not set)` if undefined. Object values are pretty-printed as JSON.

<CodeGroup>
```bash Read a simple value
milaidy config get gateway.port
```

```bash Read a nested value
milaidy config get agents.defaults.workspace
```

```bash Read an object
milaidy config get plugins
```
</CodeGroup>

### `milaidy config path`

Print the resolved path to the active configuration file.

```bash
milaidy config path
# Output: /Users/you/.milady/milady.json
```

The path is influenced by `MILADY_CONFIG_PATH` and `MILADY_STATE_DIR` environment variables.

### `milaidy config show`

Display all configuration values grouped by section, with labels, help text, and sensitive value masking.

```bash
milaidy config show [options]
```

**Options:**

| Flag | Description |
|------|-------------|
| `-a, --all` | Include advanced and hidden fields |
| `--json` | Output raw JSON instead of the formatted table |

<CodeGroup>
```bash Formatted output
milaidy config show
```

```bash Include advanced fields
milaidy config show --all
```

```bash Machine-readable JSON
milaidy config show --json
```
</CodeGroup>

Sensitive values (API keys, tokens) are displayed as `--------` in the formatted view. The `--json` output includes the actual values.

---

## `milaidy dashboard`

Open the Milaidy Control UI in your default web browser. Automatically detects whether the server is running and either opens the existing instance or starts the Vite dev server.

```bash
milaidy dashboard [options]
```

**Options:**

| Flag | Description |
|------|-------------|
| `--port <port>` | Server port to check (default: `2138`) |
| `--url <url>` | Open a specific URL directly (overrides `--port`) |

The command follows this resolution order:
1. If `--url` is provided, opens that URL directly
2. If the specified port is listening, opens `http://localhost:<port>`
3. If the dev port (`2138`) is listening, opens the dev server
4. Otherwise, starts the Vite dev server from `apps/app/` and opens it once ready

<CodeGroup>
```bash Default
milaidy dashboard
```

```bash Custom port
milaidy dashboard --port 3000
```

```bash Direct URL
milaidy dashboard --url http://my-server:8080
```
</CodeGroup>

---

## `milaidy models`

Show the status of configured model providers by checking environment variables.

```bash
milaidy models
```

Checks the following env vars and reports whether each is `configured` or `not set`:

| Environment Variable | Provider |
|---------------------|----------|
| `ANTHROPIC_API_KEY` | Anthropic (Claude) |
| `OPENAI_API_KEY` | OpenAI (GPT) |
| `AI_GATEWAY_API_KEY` | Vercel AI Gateway |
| `GOOGLE_API_KEY` | Google (Gemini) |
| `GROQ_API_KEY` | Groq |
| `XAI_API_KEY` | xAI (Grok) |
| `OPENROUTER_API_KEY` | OpenRouter |
| `OLLAMA_BASE_URL` | Ollama (local) |

---

## `milaidy plugins`

Browse, search, install, and manage ElizaOS plugins from the registry. This is a subcommand group with 12 subcommands.

<Info>
Plugin names support shorthand: `twitter` resolves to `@elizaos/plugin-twitter`. You can also specify a version with `name@version` syntax (e.g. `twitter@1.2.3` or `@custom/plugin-x@next`).
</Info>

### `milaidy plugins list`

List all plugins from the ElizaOS registry.

```bash
milaidy plugins list [options]
```

**Options:**

| Flag | Description |
|------|-------------|
| `-q, --query <query>` | Filter plugins by name or keyword |
| `-l, --limit <number>` | Max results to show (default: `30`, max: `500`) |

When a query is provided, results include version badges (v0/v1/v2 support), installation status, tags, and descriptions. Without a query, all registry plugins are listed alphabetically.

### `milaidy plugins search <query>`

Search the plugin registry by keyword with relevance scoring.

```bash
milaidy plugins search <query> [options]
```

**Options:**

| Flag | Description |
|------|-------------|
| `-l, --limit <number>` | Max results (default: `15`, max: `50`) |

Results include a match percentage and star count.

### `milaidy plugins info <name>`

Show detailed information about a specific plugin including repository, homepage, language, stars, topics, npm versions, and supported ElizaOS versions.

```bash
milaidy plugins info <name>
```

<CodeGroup>
```bash Shorthand
milaidy plugins info twitter
```

```bash Fully qualified
milaidy plugins info @elizaos/plugin-twitter
```
</CodeGroup>

### `milaidy plugins install <name>`

Install a plugin from the registry. Supports pinning to a specific version or dist-tag.

```bash
milaidy plugins install <name> [options]
```

**Options:**

| Flag | Description |
|------|-------------|
| `--no-restart` | Install without restarting the agent |

<CodeGroup>
```bash Install latest
milaidy plugins install twitter
```

```bash Pin to version
milaidy plugins install twitter@1.2.3
```

```bash Install with dist-tag
milaidy plugins install @custom/plugin-x@next
```
</CodeGroup>

By default, the agent is restarted after a successful install to load the new plugin. Use `--no-restart` to defer the restart.

### `milaidy plugins uninstall <name>`

Remove a user-installed plugin.

```bash
milaidy plugins uninstall <name> [options]
```

**Options:**

| Flag | Description |
|------|-------------|
| `--no-restart` | Uninstall without restarting the agent |

### `milaidy plugins installed`

List all plugins that were installed from the registry (not bundled or custom drop-in plugins).

```bash
milaidy plugins installed
```

### `milaidy plugins refresh`

Force-refresh the plugin registry cache. Fetches the latest plugin data from the remote registry.

```bash
milaidy plugins refresh
```

### `milaidy plugins test`

Validate custom drop-in plugins in `~/.milady/plugins/custom/` and any additional paths from config. Tests each plugin by:

1. Resolving the package entry point
2. Verifying the file exists on disk
3. Dynamically importing the module
4. Checking for a valid Plugin export (`{ name, description }` with capabilities like `services`, `providers`, `actions`, `routes`, `events`, or `init`)

```bash
milaidy plugins test
```

### `milaidy plugins config <name>`

Show or interactively edit plugin configuration parameters.

```bash
milaidy plugins config <name> [options]
```

**Options:**

| Flag | Description |
|------|-------------|
| `-e, --edit` | Launch interactive edit mode with prompts for each parameter |

In display mode, shows all plugin parameters with their current values, masking sensitive fields. In edit mode, prompts for each parameter (text input, password input, or boolean confirm depending on the parameter type) and saves values to both `process.env` and `milady.json`.

### `milaidy plugins add-path <path>`

Register an additional plugin search directory in the config file. The path must be an existing directory.

```bash
milaidy plugins add-path <path>
```

Adds the path to `plugins.load.paths` in `milady.json`. Duplicate paths are detected and rejected.

### `milaidy plugins paths`

List all plugin search directories and their contents, including the default custom plugins directory and any paths registered via `add-path`.

```bash
milaidy plugins paths
```

### `milaidy plugins open [name-or-path]`

Open a plugin directory (or the custom plugins folder) in your editor.

```bash
milaidy plugins open [name-or-path]
```

- With no argument: opens `~/.milady/plugins/custom/`
- With a directory path: opens that directory
- With a plugin name: looks up the plugin in the custom directory and opens its install path

Uses the `EDITOR` environment variable (defaults to `code` if unset).

---

## `milaidy update`

Check for and install updates. Supports release channels and cache control.

```bash
milaidy update [options]
```

**Options:**

| Flag | Description |
|------|-------------|
| `-c, --channel <channel>` | Switch release channel before updating (`stable`, `beta`, `nightly`) |
| `--check` | Check for updates without installing |
| `--force` | Force update check, bypassing the interval cache |

<Tabs>
  <Tab title="Check and install">
    ```bash
    milaidy update
    ```
  </Tab>
  <Tab title="Check only">
    ```bash
    milaidy update --check
    ```
  </Tab>
  <Tab title="Switch to beta">
    ```bash
    milaidy update --channel beta
    ```
  </Tab>
  <Tab title="Force check">
    ```bash
    milaidy update --force
    ```
  </Tab>
</Tabs>

**Release channels:**

| Channel | Description |
|---------|-------------|
| `stable` | Production-ready releases. Recommended for most users. |
| `beta` | Release candidates. May contain minor issues. |
| `nightly` | Latest development builds. May be unstable. |

The update command detects the installation method automatically (`npm`, `bunx`, `local-dev`, etc.) and runs the appropriate update command. Local dev installs are detected and the user is directed to use `git pull` instead.

### `milaidy update status`

Show the current installed version, active channel, installation method, and the latest available version across all release channels.

```bash
milaidy update status
```

### `milaidy update channel [channel]`

View or change the release channel.

```bash
milaidy update channel              # show current channel and all options
milaidy update channel beta         # switch to beta channel
milaidy update channel stable       # switch back to stable
```

---

## TUI (Terminal UI)

When you run `milaidy` or `milaidy tui`, Milaidy launches a full-screen interactive terminal chat interface built on the `@elizaos/tui` framework. The layout includes:

- **Status bar** -- displays the agent name, current model, and connection status
- **Chat area** -- shows the conversation with rendered messages and tool output
- **Input editor** -- multi-line text editor with autocomplete for slash commands
- **Footer** -- displays available hotkeys

### TUI Hotkeys

| Key | Action |
|-----|--------|
| `Enter` | Send the current message |
| `Shift+Enter` | Insert a newline (multi-line input) |
| `Ctrl+P` | Open the model selector overlay |
| `Ctrl+E` | Toggle expand/collapse of tool output |
| `Ctrl+C` | Cancel the current operation, or quit if idle |

### TUI Slash Commands

Slash commands are typed directly in the TUI input field. The autocomplete provider suggests commands as you type.

| Command | Description |
|---------|-------------|
| `/model [provider/id]` | Open the model selector overlay, or switch directly to a model (e.g. `/model anthropic/claude-sonnet-4-20250514`) |
| `/models` | Alias for `/model` |
| `/clear` | Clear the chat display and reset to the welcome message |
| `/help` | Show help information |
| `/exit` | Quit Milaidy |
| `/quit` | Alias for `/exit` |

---

## Headless / Server Mode

For production deployments, Docker containers, or headless environments, use the `start` command to run without the TUI:

<CodeGroup>
```bash Direct
milaidy start
```

```bash With alias
milaidy run
```

```bash Dev server mode
MILADY_HEADLESS=1 bun src/runtime/dev-server.ts
```
</CodeGroup>

In headless mode:
- The API server starts on port `2138` (override with `MILADY_PORT`)
- Logs go to `~/.milady/logs/`
- The runtime supports hot-restart via the API (`POST /api/agent/restart`)
- Daemonize with your preferred process manager (`systemd`, `pm2`, `docker`, etc.)

The dev server (`src/runtime/dev-server.ts`) is an alternative entry point that starts the runtime in headless mode and wires it to the API server, enabling the Control UI to communicate with a live agent.

---

## Environment Variables

These environment variables affect CLI and runtime behavior:

### Path and State

| Variable | Description | Default |
|----------|-------------|---------|
| `MILADY_STATE_DIR` | Override the state directory | `~/.milady/` |
| `MILADY_CONFIG_PATH` | Override the config file path | `~/.milady/milady.json` |
| `MILADY_PROFILE` | Active configuration profile name | (none) |
| `MILADY_PORT` | API server port | `2138` |
| `MILADY_HEADLESS` | Run in headless mode (set to `1`) | (unset) |
| `MILADY_GATEWAY_PORT` | Gateway port (auto-set to `19001` with `--dev`) | (unset) |
| `MILADY_WORKSPACE_ROOT` | Override the workspace root directory | (auto-resolved) |
| `MILADY_OAUTH_DIR` | Override the OAuth credentials directory | `~/.milady/credentials/` |

### Update and Registry

| Variable | Description | Default |
|----------|-------------|---------|
| `MILADY_UPDATE_CHANNEL` | Override the release channel (`stable`, `beta`, `nightly`) | (from config) |
| `MILADY_SKILLS_CATALOG` | Override the skills catalog file path | (auto-resolved) |
| `MILADY_DISABLE_LAZY_SUBCOMMANDS` | Eagerly register all subcommands (set to `1`) | (unset) |

### Model Provider API Keys

| Variable | Provider |
|----------|----------|
| `ANTHROPIC_API_KEY` | Anthropic (Claude) |
| `OPENAI_API_KEY` | OpenAI (GPT) |
| `AI_GATEWAY_API_KEY` | Vercel AI Gateway |
| `GOOGLE_API_KEY` | Google (Gemini) |
| `GROQ_API_KEY` | Groq |
| `XAI_API_KEY` | xAI (Grok) |
| `OPENROUTER_API_KEY` | OpenRouter |
| `OLLAMA_BASE_URL` | Ollama (local) |

### Other

| Variable | Description |
|----------|-------------|
| `EDITOR` | Editor used by `milaidy plugins open` (default: `code`) |
| `API_PORT` / `SERVER_PORT` | Alternative API port overrides used by some actions |
